# AWS 네트워킹 서비스

### Amazon VPC
- 독립적으로 구성된 VPC는 필요에 따라 동일 리전이나 다른 리전에 위치한 VPC들을 서로 연결하여 클라우드 네트워크를 확장할 수도 있다.
- Amazon VPC라는 하나의 독립된 클라우드 네트워크에도 서브넷을 이용하여 분리된 네트워크로 구성할 수 있다. 서브넷은 VPC 내 별도로 나누어진 네트워크라고 생각하면 된다. 그리고 서브넷은 반드시 하나의 가용 영역에 종속적으로 위치한다.
- 퍼블릭 서브넷은 인터넷 구간과 연결되어 있어 외부 인터넷 통신이 가능한 네트워크 영역이고, 프라이빗 서브넷은 인터넷 구간과 연결되어 있지 않은 폐쇄적인 네트워크 영역이다.
- Amazon VPC는 내부에 생성할 서브넷의 IP 주소 범위를 할당하기 위해 IP CIDR을 가지고 있으며, VPC 내 생성된 서브넷도 VPC의 IP CIDR에서 분할된 IP CIDR를 가지고 있다.
- Amazon VPC를 생성하면 기본적으로 네트워크 경로를 확인하며 트래픽을 전달하는 목적의 가상 라우터가 생성된다. 이렇게 생성된 가상 라우터는 기본 라우팅 테이블을 보유하고 있으며, 라우팅 테이블을 통해 네트워크 경로를 식별할 수 있다.

### Amazon VPC와 다른 네트워크 연결
- 인터넷 게이트웨이
- NAT 게이트웨이
- VPC 피어링

### NAT gateway vs Reverse Proxy
- NAT gateway
    - private subnet내에 있는 인스턴스들이 인터넷과 통신할 수 있도록 하기 위해 private IP를 public IP로 변환하는데 주로 사용된다.
- Reverse Proxy
    - 웹 서버 앞에 위치하며 클라이언트로 요청이 들어올 때 리버스 프록시를 한번 거쳐서 실제 웹 서버로 이동할 수 있게 한다.
    - 이때 리버스 프록시를 거치면서 여기서 처리할 수 있는 일을 미리 처리해서 웹 서버로 반환하는데, 로드 밸런싱이나 캐싱, SSL 암호화와 복호화, 보안 기능, 로깅 및 모니터링 등의 일을 처리할 수 있다.
    - 리버스 프록시는 클라이언트와 웹 서버 사이의 중계 역할을 수행하는 것들을 아우르는 표현이다.
- 그런데 리버스 프록시가 NAT 게이트웨이를 대신하는 경우가 있다. 리버스 프록시가 NAT 게이트웨이를 대신할 경우 어떤 장점이 있을까?
    - 리버스 프록시는 L7(Application layer)이기 때문에 L4(Transport Layer)인 NAT 게이트웨이보다 더 세심한 조작이 가능하다.
        - NAT 게이트웨이는 L4에서 동작하므로 단순히 IP 주소만 보고 변환하므로 세심한 조작이 불가능하다. 그러나 리버스 프록시는 L7이므로 요청 HTTP 헤더, URL, 쿠키 등의 정보를 이용하여 요청 내용을 좀 더 세밀하게 필터링할 수 있다.
        - 리버스 프록시는 요청의 내용을 더 깊이 이해하고 조작할 수 있으므로, 더 복잡한 요청 라우팅 및 처리를 수행할 수 있다.
